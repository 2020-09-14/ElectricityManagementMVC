
@{
    ViewData["Title"] = "Addcoupon";
}

<!DOCTYPE html>

<h1>新增优惠券</h1>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="~/layui-v2.5.6/layui/css/layui.css" rel="stylesheet" />
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>


    <form class="layui-form" action="">

        <div class="layui-form-item" style="width:320px;">
            <label class="layui-form-label" style="width:100px"><span class="layui-badge-dot"></span>类型</label>
            <div class="layui-input-block">
                <input id="type" name="title" class="layui-input" type="text" placeholder="直减/满减" autocomplete="off" lay-verify="title">
            </div>
        </div>

        <div class="layui-form-item" style="width:320px;">
            <label class="layui-form-label" style="width:100px"><span class="layui-badge-dot"></span>名称</label>
            <div class="layui-input-block">
                <input id="name" name="title" class="layui-input" type="text" placeholder="2-10字" autocomplete="off" lay-verify="title">
            </div>
        </div>

        <div class="layui-form-item" style="width:320px;">
            <label class="layui-form-label" style="width:100px"><span class="layui-badge-dot"></span>面值</label>
            <div class="layui-input-block">
                <input id="facevalue" name="title" class="layui-input" type="text" placeholder="x" autocomplete="off" lay-verify="title">
            </div>
        </div>

        <div class="layui-form-item" style="width:320px;">
            <label class="layui-form-label" style="width:100px"><span class="layui-badge-dot"></span>使用条件</label>
            <div class="layui-input-block">
                <input id="userange" name="title" class="layui-input" type="text" placeholder="请输入条件" autocomplete="off" lay-verify="title">
            </div>
        </div>

        <div class="layui-form-item" style="width:320px;">
            <label class="layui-form-label" style="width:100px"><span class="layui-badge-dot"></span>发行量</label>
            <div class="layui-input-block">
                <input id="privatestate" name="title" class="layui-input" type="text" placeholder="发行量" autocomplete="off" lay-verify="title">
            </div>
        </div>

        <div class="layui-form-item" style="width:320px;">
            <label class="layui-form-label" style="width:100px"><span class="layui-badge-dot"></span>限领</label>
            <div class="layui-input-block">
                <input id="limit" name="title" class="layui-input" type="text" placeholder="限领" autocomplete="off" lay-verify="title">
            </div>
        </div>

        <div style="margin-left:110px;margin-top:30px">
            <button id="Add" class="layui-btn layui-btn-normal" type="button">提交</button>
            <button id="Quxiao" class="layui-btn layui-btn-normal" type="button">取消</button>
        </div>
    </form>

    <!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
    <script src="~/layui-v2.5.6/layui/layui.js"></script>
    <script src="~/新建文件夹/js/jquery.min.js"></script>


</body>

</html>

<script>


    layui.use('form', function () {

        var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
        form.render();

    });

    $("#Add").click(function () {
      
        var obj = {
            "Type": $("#type").val(),
            "CouponName": $("#couponname").val(),
            "Facevalue": $("#facevalue").val(),
            "UseRange": $("#userange").val(),
            "Privatestate": $("#privatestate").val(),
            "Limit": Number($("#limit").val()),

        };




        var cc = JSON.stringify(obj);
        console.log(cc);
        $.ajax({
            url: 'http://localhost:2789/api/Addcoupon',
            type: 'post',
            dataType: 'json',
            data: cc,
            contentType: "application/json",
            success: function (d) {
                if (d > 0) {
                    alert('添加成功');
                    location.href = "/Activity/Showcoupon";
                }

            }
        })

    })

    $("#Quxiao").click(function () {
        location.href = "/Activity/Addcoupon";
    })

    //function getDate(strDate) {
    //    var date = eval('new Date(' + strDate.replace(/\d+(?=-[^-]+$)/,
    //        function (a) { return parseInt(a, 10) - 1; }).match(/\d+/g) + ')');
    //    return date;
    //}


</script>



